<!doctype html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>StarMind</title>
    <link rel="stylesheet" href="/assets/app.css" />
</head>

<body class="page page-chat">
    <div class="app">
        <!-- Mobile Header -->
        <header class="header-mobile">
            <button id="mobileMenuBtn" class="btn btn-icon">
                <svg viewBox="0 0 24 24" class="icon">
                    <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path>
                </svg>
            </button>
            <span style="font-weight:600">StarMind</span>
            <button id="mobileNewChat" class="btn btn-icon">
                <svg viewBox="0 0 24 24" class="icon">
                    <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path>
                </svg>
            </button>
        </header>

        <aside class="sidebar" id="sidebar">
            <div class="sidebar-inner">
                <div class="sidebar-top">
                    <!-- New Chat Button -->
                    <button id="newChat" class="btn btn-secondary btn-full">
                        <svg viewBox="0 0 24 24" class="icon">
                            <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path>
                        </svg>
                        新对话
                    </button>
                </div>

                <div class="sidebar-content" style="flex:1; overflow-y: auto; margin-top: 10px;">
                    <!-- Recent Chats Title -->
                    <div style="padding: 0 10px 10px; font-size: 12px; color: var(--text-secondary);">最近对话</div>
                    <div id="historyList" class="history-list"></div>
                </div>

                <div class="sidebar-bottom">
                    <button id="logout" class="btn btn-ghost btn-full">
                        <svg viewBox="0 0 24 24" class="icon">
                            <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z">
                            </path>
                        </svg>
                        退出登录
                    </button>
                </div>
            </div>
        </aside>

        <main class="main">
            <!-- Desktop Sidebar Toggle (Initially hidden, revealed when sidebar collapsed) -->
            <button id="toggleSidebar" class="btn btn-icon desktop-toggle" title="展开侧边栏">
                <svg viewBox="0 0 24 24" class="icon">
                    <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path>
                </svg>
            </button>

            <!-- Collapse button inside Main/Sidebar area can be tricky, 
                 Usually ChatGPT puts the collapse button inside the sidebar or shifting it.
                 Here we'll put a collapse button ON the sidebar top for desktop.
            -->
            <div style="position: absolute; top: 10px; left: 10px; z-index: 20;">
                <button id="collapseSidebar" class="btn btn-icon" title="收起侧边栏">
                    <svg viewBox="0 0 24 24" class="icon">
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path>
                    </svg>
                </button>
            </div>

            <div id="chat" class="chat">
                <div class="msg msg-assistant">
                    <div class="msg-content-wrapper">
                        <div class="avatar avatar-assistant">
                            <svg viewBox="0 0 24 24" class="icon" style="width:20px;height:20px;fill:white">
                                <path
                                    d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z">
                                </path>
                            </svg>
                        </div>
                        <div class="bubble-text">你好！我是 StarMind AI，有什么我可以帮你的吗？</div>
                    </div>
                </div>
            </div>

            <div class="composer">
                <div class="composer-inner">
                    <textarea id="input" class="composer-input" rows="1" placeholder="发送消息..." spellcheck="false"></textarea>
                    <div class="send-btn-wrapper">
                        <button id="send" class="btn-send" title="发送">
                            <svg viewBox="0 0 24 24" class="icon" style="width:16px;height:16px;">
                                <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                <div id="status" class="status"></div>
            </div>
        </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.11/dist/purify.min.js"></script>
    <script src="/assets/app.js"></script>
</body>

</html>